<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/ClientSide/html.html to edit this template
-->
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <!--CSS-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../css/main.css" rel="stylesheet" type="text/css" />
    <link href="../css/navbar.css" rel="stylesheet" type="text/css" />
    <!--script de ícones bootstrap 5.1.3-->
    <script src="../js/jquery.js" type="text/javascript"></script>
    <!--scripts-->
    <script src="https://unpkg.com/@popperjs/core@2.4.0/dist/umd/popper.min.js"></script>
    <script src="../bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
</head>

<body>

    <!-- Modal adicionar estratégia -->
    <div class="modal fade" id="add-estrategies" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <input type="hidden" id="id" value="" />
            <div class="modal-content bg-greydark">
                <div class="modal-header">
                    <h5 class="modal-title text-white fw-light" id="staticBackdropLabel">Cadastro da estratégia<i
                            class="ms-2 bi bi-clipboard2-data"></i></h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="exampleFormControlInput1" class="form-label text-white">Nome da estratégia</label>
                        <select id="estrategia" class="form-select mb-2" aria-label="Default select">
                            <option value="" selected>Selecionar estratégia...</option>
                            <option value="r-v">Repetição do vermelho</option>
                            <option value="r-p">Repetição do preto</option>
                            <option value="r-np">Repetição de numeros pares</option>
                            <option value="r-ni">Repetição de numeros impares</option>
                            <option value="r-na">Repetição de numeros altos</option>
                            <option value="r-nb">Repetição de numeros baixos</option>
                            <option value="r-d1">Repetição 1° duzia</option>
                            <option value="r-d2">Repetição 2° duzia</option>
                            <option value="r-d3">Repetição 3° duzia</option>
                            <option value="r-c1">Repetição 1° coluna</option>
                            <option value="r-c2">Repetição 2° coluna</option>
                            <option value="r-c3">Repetição 3° coluna</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="exampleFormControlInput1" class="form-label text-white">Nome da estratégia</label>
                        <select id="aposta" class="form-select mb-2" aria-label="Default select">
                            <option value="" selected>Selecionar aposta ...</option>
                            <option value="a-v">Apostar no vermelho</option>
                            <option value="a-p">Apostar no preto</option>
                            <option value="a-np">Apostar em numeros pares</option>
                            <option value="a-ni">Apostar em numeros impares</option>
                            <option value="a-na">Apostar em numeros altos</option>
                            <option value="a-nb">Apostar em numeros baixos</option>
                            <option value="a-d1">Apostar 1° duzia</option>
                            <option value="a-d2">Apostar 2° duzia</option>
                            <option value="a-d3">Apostar 3° duzia</option>
                            <option value="a-d1d2">Apostar 1° e 2° duzia</option>
                            <option value="a-d2d3">Apostar 2° e 3° duzia</option>
                            <option value="a-d1d3">Apostar 1° e 3° duzia</option>
                            <option value="a-c1">Apostar 1° coluna</option>
                            <option value="a-c2">Apostar 2° coluna</option>
                            <option value="a-c3">Apostar 3° coluna</option>
                            <option value="a-c1c2">Apostar 1° e 2° coluna</option>
                            <option value="a-c2c3">Apostar 2° e 3° coluna</option>
                            <option value="a-c1c3">Apostar 1° e 3° coluna</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="exampleFormControlInput1" class="form-label text-white">Valor de analise</label>
                        <input type="number" id="analise" class="form-control" id="exampleFormControlInput1"
                            placeholder="Analisa em ...">
                    </div>
                    <div class="mb-3">
                        <label for="exampleFormControlInput1" class="form-label text-white">Valor de confirmação</label>
                        <input type="number" id="confirma" class="form-control" id="exampleFormControlInput1"
                            placeholder="Analisa em ...">
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="fechar-modal" type="button" class="btn btn-danger"
                        data-bs-dismiss="modal">Cancelar</button>
                    <button id="salvar" type="button" class="btn btn-primary">Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 w-100 bg-greydark fixed-top">
        <div class="container">
            <div class="col-auto" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample"
                aria-controls="offcanvasExample">
                <button class="btn btn-light border-0 rounded-0 fs-5 op-effect"><i class="bi bi-list"></i></button>
            </div>
        </div>
    </div>

    <!-- MENU ====================================== -->
    <nav id="navegador">

    </nav>

    <!--corpo da página-->
    <div class="container mt-5">
        <div class="row">
            <p class="fs-5 fw-light text-black mb-0 mt-4">Painel de estratégias<i class="ms-2 bi bi-graph-up-arrow"></i>
            </p>
        </div>
        <hr class="bg-primary">
        <div class="row">
            <!-- legendas e sinais-->
            <div class="col-12">
                <div class="row">
                    <div class="col-12">
                        <p class="fs-6 fw-light">Legendas de sinais e status</p>
                    </div>
                    <div class="col-12">
                        <div class="row">
                            <div class="col-md-3 col-lg-2 mb-xs-2">
                                <div class="bg-light box-shadow rounded-3 p-2">
                                    <i class="bi bi-bookmark-check-fill text-success"></i>
                                    <i class="bi bi-check-circle-fill text-success"></i>
                                    <span class="fs-6 fw-bold float-end">Ok</span>
                                </div>
                            </div>
                            <div class="col-md-3 col-lg-2 mb-xs-2">
                                <div class="bg-light box-shadow rounded-3 p-2">
                                    <i class="bi bi-bookmark-dash-fill text-warning"></i>
                                    <i class="bi bi-dash-circle-fill text-warning"></i>
                                    <span class="fs-6 fw-bold float-end">Atenção</span>
                                </div>
                            </div>
                            <div class="col-md-3 col-lg-2 mb-xs-2">
                                <div class="bg-light box-shadow rounded-3 p-2">
                                    <i class="bi bi-bookmark-x-fill text-danger"></i>
                                    <i class="bi bi-x-circle-fill text-danger"></i>
                                    <span class="fs-6 fw-bold float-end">Aviso!</span>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <hr class="bg-primary">
                <div class="row">
                    <div class="fs-6 fw-light text-black my-2">Resumo de estratégias<span
                            class="badge bg-primary ms-sm-auto float-lg-end col-auto fs-6 fw-light d-md-block cursor-pointer"
                            data-bs-toggle="modal" data-bs-target="#add-estrategies"><i
                                class="bi bi-plus-circle me-2"></i>Adic. Estratégia</span></div>
                </div>
                <div class="table-responsive rounded-3 box-shadow">
                    <table class="table table-light table-hover align-middle table-responsive">
                        <thead>
                            <!--escopo da tabela-->
                            <tr>
                                <th scope="col"></th>
                                <th scope="col">Estratégia</th>
                                <th scope="col">Aposta</th>
                                <th scope="col">Analisa</th>
                                <th scope="col">Confirma</th>
                                <th scope="col">Sinal</th>
                                <th scope="col">Status</th>
                            </tr>
                        </thead>
                        <tbody id="listagem">

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

</body>
<script>
    $(document).ready(function () {

        let cadastrando = false

        function selecionaDados() {

            $.get("http://192.99.105.59:3000/estrategia", function (dados) {

                let listagem = "";

                for (i in dados) {
                    let estrategia = "";
                    let aposta = ""

                    // Analisa estrategia ======================================================
                    switch (dados[i].estrategia) {
                        case "r-v":
                            estrategia = "Repetição do vermelho";
                            break;
                        case "r-p":
                            estrategia = "Repetição do preto";
                            break;

                        case "r-np":
                            estrategia = "Repetição de páres";
                            break;
                        case "r-ni":
                            estrategia = "Repetição de ímpares";
                            break;

                        case "r-na":
                            estrategia = "Repetição de altos";
                            break;

                        case "r-nb":
                            estrategia = "Repetição de baixos";
                            break;

                        case "r-d1":
                            estrategia = "Repetição 1° duzia";
                            break;

                        case "r-d2":
                            estrategia = "Repetição 2° duzia";
                            break;

                        case "r-d3":
                            estrategia = "Repetição 3° duzia";
                            break;

                        case "r-c1":
                            estrategia = "Repetição 1° coluna";
                            break;

                        case "r-c2":
                            estrategia = "Repetição 2° coluna";
                            break;

                        case "r-c3":
                            estrategia = "Repetição 3° coluna";
                            break;
                    }



                    // Analisa aposta ======================================================
                    switch (dados[i].aposta) {
                        case "a-v":
                            aposta = "Apostar no vermelho";
                            break;
                        case "a-p":
                            aposta = "Apostar no preto";
                            break;

                        case "a-np":
                            aposta = "Apostar em numeros pares";
                            break;

                        case "a-ni":
                            aposta = "Apostar em numeros ímpares";
                            break;

                        case "a-na":
                            aposta = "Apostar em numeros altos";
                            break;

                        case "a-nb":
                            aposta = "Apostar em numeros baixos";
                            break;


                        case "a-d1":
                            aposta = "Apostar em 1° duzia";
                            break;

                        case "a-d2":
                            aposta = "Apostar em 2° duzia";
                            break;
                        case "a-d3":
                            aposta = "Apostar em 3° duzia";
                            break;

                        case "a-d1d2":
                            aposta = "Apostar 1° e 2° duzia";
                            break;

                        case "a-d2d3":
                            aposta = "Apostar 2° e 3° duzia";
                            break;

                        case "a-d1d3":
                            aposta = "Apostar 1° e 3° duzia";
                            break;

                        case "a-d1":
                            aposta = "Apostar em 1° coluna";
                            break;

                        case "a-d2":
                            aposta = "Apostar em 2° coluna";
                            break;
                        case "a-d3":
                            aposta = "Apostar em 3° coluna";
                            break;

                        case "a-d1d2":
                            aposta = "Apostar 1° e 2° coluna";
                            break;

                        case "a-d2d3":
                            aposta = "Apostar 2° e 3° coluna";
                            break;

                        case "a-d1d3":
                            aposta = "Apostar 1° e 3° coluna";
                            break;
                    }


                    listagem += "<tr><td><span id=" + dados[i]._id + " class='btn-editar badge bg-primary fs-6 cursor-pointer' data-bs-toggle='modal' data-bs-target='#add-estrategies'><i class='bi bi-pencil-square'></i></span></td>";
                    listagem += "<td>" + estrategia + "</td><td>" + aposta + "</td><td>" + dados[i].analise + "</td><td>" + dados[i].confirma + "</td><td><i class='bi bi-bookmark-check-fill text-success'></i></td><td><i class='bi bi-check-circle-fill text-success'></i></td></tr>";


                }

                $("#listagem").html(listagem)

                $("#listagem").delegate(".btn-editar", "click", function (e) {
                    $.get("http://192.99.105.59:3000/estrategia/" + e.currentTarget.id, function (dados) {

                        $("#id").val(dados._id);
                        $("#estrategia").val(dados.estrategia);
                        $("#aposta").val(dados.aposta);
                        $("#analise").val(dados.analise);
                        $("#confirma").val(dados.confirma);
                    })
                });

            })

        }

        function cadastrar() {
            let estrategia = {
                id: $("#id").val(),
                estrategia: $("#estrategia").val(),
                aposta: $("#aposta").val(),
                analise: $("#analise").val(),
                confirma: $("#confirma").val()
            }



            $.post("http://192.99.105.59:3000/estrategia/cadastro", estrategia, function () {
                alert("Cadastro realizado com sucesso !");
                $("#id").val("");
                $("#estrategia").val("");
                $("#aposta").val("");
                $("#analise").val("");
                $("#confirma").val("");
                $("#fechar-modal").click();
                selecionaDados();
            })
        }

        selecionaDados();

        $("#salvar").click(function () {
            if (cadastrando == false) {
                cadastrando = true;

                if ($("#estrategia").val() != "")
                    if ($("#aposta").val() != "")
                        if ($("#analise").val().length > 0)
                            if ($("#confirma").val().length > 0)
                                cadastrar();
                            else
                                alert('Valor de confirmacao invalido');
                        else
                            alert('Valor de analise invalido');
                    else
                        alert('Selecione uma aposta');
                else
                    alert('Selecione uma estrategia');




                cadastrando = false;
            }
        })

        $("#navegador").load("./menu.html", function () {

            //dropdowns script único

            $(".category").hide();
            $(".tags .dropper").addClass("open");

            var cat_open = 0;

            $(".tags .dropper").click(function () {
                $(this).next('.category').animate({ "height": "toggle" }, 500);
            });
        });

    })


</script>

</html>